<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CollabForge - Finish What You Started</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Crimson+Pro:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --burnt-orange: #FF6B35;
            --deep-black: #0A0A0A;
            --warm-grey: #2A2A2A;
            --cream: #F4F1E8;
            --accent-yellow: #FFC857;
            --muted-red: #C1666B;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Crimson Pro', serif;
            background: var(--deep-black);
            color: var(--cream);
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px);
            pointer-events: none;
            opacity: 0.4;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 1;
        }
        
        header {
            padding: 2rem 0;
            border-bottom: 2px solid var(--burnt-orange);
            margin-bottom: 3rem;
            background: linear-gradient(to bottom, rgba(10,10,10,0.95), rgba(10,10,10,0.7));
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-family: 'Space Mono', monospace;
            font-size: 2.5rem;
            letter-spacing: -2px;
            color: var(--burnt-orange);
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: 'â–¶';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1rem;
            color: var(--accent-yellow);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .tagline {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--cream);
            opacity: 0.7;
            letter-spacing: 1px;
            margin-top: 0.5rem;
        }
        
        .auth-section {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .user-info {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--accent-yellow);
        }
        
        button, .btn {
            font-family: 'Space Mono', monospace;
            padding: 0.7rem 1.5rem;
            border: 2px solid var(--burnt-orange);
            background: transparent;
            color: var(--burnt-orange);
            cursor: pointer;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--burnt-orange);
            transition: left 0.3s ease;
            z-index: -1;
        }
        
        button:hover::before {
            left: 0;
        }
        
        button:hover {
            color: var(--deep-black);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        button.primary {
            background: var(--burnt-orange);
            color: var(--deep-black);
        }
        
        button.primary::before {
            background: var(--accent-yellow);
        }
        
        .upload-section {
            background: var(--warm-grey);
            padding: 3rem;
            margin-bottom: 4rem;
            border: 2px dashed var(--burnt-orange);
            position: relative;
            overflow: hidden;
        }
        
        .upload-section::before {
            content: 'â™ªâ™«â™ª';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 10rem;
            color: var(--burnt-orange);
            opacity: 0.05;
            transform: rotate(-15deg);
        }
        
        .upload-section h2 {
            font-family: 'Space Mono', monospace;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--accent-yellow);
            text-transform: uppercase;
            letter-spacing: -1px;
        }
        
        .upload-form {
            display: grid;
            gap: 1.5rem;
        }
        
        input[type="text"], input[type="email"], input[type="password"], textarea {
            font-family: 'Crimson Pro', serif;
            background: var(--deep-black);
            border: 1px solid var(--burnt-orange);
            color: var(--cream);
            padding: 1rem;
            font-size: 1.1rem;
            width: 100%;
        }
        
        input[type="text"]::placeholder, input[type="email"]::placeholder, input[type="password"]::placeholder, textarea::placeholder {
            color: rgba(244, 241, 232, 0.4);
        }
        
        .file-upload {
            position: relative;
            border: 2px dashed var(--accent-yellow);
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 200, 87, 0.05);
        }
        
        .file-upload:hover {
            background: rgba(255, 200, 87, 0.1);
            border-color: var(--burnt-orange);
        }
        
        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            top: 0;
            left: 0;
        }
        
        .file-upload-text {
            font-family: 'Space Mono', monospace;
            color: var(--accent-yellow);
            pointer-events: none;
        }
        
        .songs-grid {
            display: grid;
            gap: 3rem;
            margin-bottom: 4rem;
        }
        
        .song-card {
            background: var(--warm-grey);
            border-left: 4px solid var(--burnt-orange);
            padding: 2rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .song-card.complete {
            border-left-color: var(--accent-yellow);
            background: linear-gradient(135deg, var(--warm-grey) 0%, rgba(255, 200, 87, 0.1) 100%);
        }
        
        .song-card.complete::after {
            content: 'âœ“ COMPLETE';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-yellow);
            background: var(--deep-black);
            padding: 0.3rem 0.7rem;
            border: 1px solid var(--accent-yellow);
            letter-spacing: 1px;
        }
        
        .song-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1.5rem;
        }
        
        .song-title {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            color: var(--burnt-orange);
            margin-bottom: 0.5rem;
            letter-spacing: -1px;
        }
        
        .song-meta {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--cream);
            opacity: 0.6;
        }
        
        .song-description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .audio-player {
            background: var(--deep-black);
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 107, 53, 0.3);
        }
        
        audio {
            width: 100%;
            filter: sepia(100%) saturate(200%) hue-rotate(330deg);
        }
        
        .versions-section {
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 107, 53, 0.3);
            padding-top: 2rem;
        }
        
        .versions-header {
            font-family: 'Space Mono', monospace;
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            color: var(--accent-yellow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .version-item {
            background: rgba(10, 10, 10, 0.6);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 2px solid var(--muted-red);
            position: relative;
        }
        
        .version-item.original {
            border-left-color: var(--accent-yellow);
            background: rgba(255, 200, 87, 0.1);
        }
        
        .version-item.original::before {
            content: 'ORIGINAL';
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent-yellow);
            background: var(--deep-black);
            padding: 0.2rem 0.5rem;
            letter-spacing: 1px;
        }
        
        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .version-by {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            color: var(--cream);
        }
        
        .like-btn {
            background: transparent;
            border: 1px solid var(--muted-red);
            color: var(--muted-red);
            padding: 0.4rem 1rem;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .like-btn:hover {
            background: var(--muted-red);
            color: var(--deep-black);
        }
        
        .like-btn.liked {
            background: var(--muted-red);
            color: var(--deep-black);
            border-color: var(--muted-red);
        }
        
        .show-more {
            text-align: center;
            margin-top: 1.5rem;
        }
        
        .show-more button {
            background: transparent;
            border: 1px dashed var(--burnt-orange);
            color: var(--burnt-orange);
            padding: 0.5rem 2rem;
        }
        
        .remix-form {
            background: rgba(10, 10, 0, 0.8);
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid var(--burnt-orange);
        }
        
        .remix-form h4 {
            font-family: 'Space Mono', monospace;
            color: var(--burnt-orange);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            color: var(--cream);
            opacity: 0.8;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 10, 0.95);
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--warm-grey);
            padding: 3rem;
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--burnt-orange);
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--cream);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        .modal h2 {
            font-family: 'Space Mono', monospace;
            color: var(--burnt-orange);
            margin-bottom: 2rem;
            font-size: 1.8rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--cream);
            opacity: 0.5;
        }
        
        .empty-state p {
            font-family: 'Space Mono', monospace;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .loading {
            text-align: center;
            padding: 4rem 2rem;
            font-family: 'Space Mono', monospace;
            color: var(--accent-yellow);
        }

        .error-message {
            background: rgba(193, 102, 107, 0.1);
            border: 1px solid var(--muted-red);
            color: var(--muted-red);
            padding: 1rem;
            margin-bottom: 1rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }

        .success-message {
            background: rgba(255, 200, 87, 0.1);
            border: 1px solid var(--accent-yellow);
            color: var(--accent-yellow);
            padding: 1rem;
            margin-bottom: 1rem;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .upload-section {
                padding: 2rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1>CollabForge</h1>
                    <div class="tagline">Let the world finish what you started</div>
                </div>
                <div class="auth-section">
                    <div class="user-info" id="userInfo" style="display: none;"></div>
                    <button id="authBtn" class="primary">Sign In</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="upload-section" id="uploadSection" style="display: none;">
            <h2>Release Your Unfinished Work</h2>
            <p style="margin-bottom: 2rem; opacity: 0.8;">Once you post it, you give up control. It belongs to the world now.</p>
            <form class="upload-form" id="uploadForm">
                <div id="uploadError"></div>
                <div>
                    <input type="text" id="songTitle" placeholder="Song Title" required>
                </div>
                <div>
                    <textarea id="songDescription" rows="4" placeholder="What's the story? What were you trying to say? (Optional)" style="resize: vertical;"></textarea>
                </div>
                <div class="file-upload">
                    <input type="file" id="audioFile" accept="audio/*" required>
                    <div class="file-upload-text">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ“¼</div>
                        <div>Drop your raw track here</div>
                        <div style="font-size: 0.8rem; margin-top: 0.5rem; opacity: 0.6;">MP3, WAV, or any audio format</div>
                    </div>
                </div>
                <button type="submit" class="primary" id="uploadBtn">Let It Go â†’</button>
            </form>
        </section>

        <section class="songs-grid" id="songsGrid">
            <div class="loading">Loading songs...</div>
        </section>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('authModal')">Ã—</button>
            <h2 id="authModalTitle">Sign In</h2>
            <div id="authError"></div>
            <form id="authForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" required minlength="6">
                </div>
                <button type="submit" class="primary" style="width: 100%;" id="authSubmitBtn">Create Account</button>
                <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem;">
                    <a href="#" id="toggleAuthMode" style="color: var(--accent-yellow); text-decoration: none;">Already have an account? Sign in</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Release Confirmation Modal -->
    <div class="modal" id="releaseModal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeModal('releaseModal')">Ã—</button>
            <h2 style="margin-bottom: 1.5rem;">Before You Let Go</h2>
            
            <div style="background: rgba(255, 107, 53, 0.1); border-left: 3px solid var(--burnt-orange); padding: 1.5rem; margin-bottom: 2rem;">
                <p style="line-height: 1.8; margin-bottom: 1rem; font-size: 1.1rem;">
                    You're about to release <strong id="confirmTitle"></strong> into the world.
                </p>
                <p style="line-height: 1.8; font-size: 1.05rem; opacity: 0.9;">
                    This means you are giving up control. Anyone can download it, remix it, rewrite it, change the genre, make it unrecognizable. You will always be credited as the original creator, but you <strong>cannot delete or veto</strong> what others do with it.
                </p>
            </div>

            <div style="background: rgba(10, 10, 10, 0.6); padding: 1.5rem; margin-bottom: 2rem; border: 1px dashed rgba(255, 200, 87, 0.3);">
                <h3 style="font-family: 'Space Mono', monospace; color: var(--accent-yellow); font-size: 1rem; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px;">What Happens Next:</h3>
                <ul style="list-style: none; line-height: 2; font-size: 1rem;">
                    <li>âœ“ Your original version stays pinned at the top</li>
                    <li>âœ“ You'll be credited as the original creator</li>
                    <li>âœ“ You earn 60% of royalties if it goes commercial</li>
                    <li>âœ“ The community decides which version wins</li>
                    <li style="color: var(--muted-red); margin-top: 0.5rem;">âœ— You cannot delete or control remixes</li>
                </ul>
            </div>

            <div style="background: rgba(255, 200, 87, 0.05); padding: 1.5rem; margin-bottom: 2rem; border-left: 3px solid var(--accent-yellow);">
                <p style="font-family: 'Crimson Pro', serif; font-size: 1.15rem; line-height: 1.7; font-style: italic; opacity: 0.9;">
                    "This is about getting the song out of your head so it stops rotting inside you. Once it's posted, it belongs to the world. You just get to watch what happens."
                </p>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label style="display: flex; align-items: start; gap: 1rem; cursor: pointer; font-size: 1rem; line-height: 1.6;">
                    <input type="checkbox" id="confirmCheckbox" style="margin-top: 0.3rem; width: 18px; height: 18px; cursor: pointer;">
                    <span>I understand that I'm releasing this song to the community and giving up control over how it's remixed or reimagined.</span>
                </label>
            </div>

            <div style="display: flex; gap: 1rem;">
                <button onclick="closeModal('releaseModal')" style="flex: 1;">Cancel</button>
                <button id="confirmReleaseBtn" onclick="confirmRelease()" class="primary" style="flex: 1;" disabled>Let It Go â†’</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
